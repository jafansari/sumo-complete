<?xml version="1.0" encoding="UTF-8"?>
<book>
  <bookinfo>
    <title>SUMO developer documentation</title>

    <author>
      <firstname>Daniel</firstname>

      <surname>Krajzewicz</surname>

      <affiliation>
        <address><email>Daniel.Krajzewicz@dlr.de</email></address>
      </affiliation>
    </author>

    <releaseinfo>$Revision$</releaseinfo>
  </bookinfo>

  <toc></toc>

  <chapter id="dev_chp02">
    <title>Basics</title>

    <para>Within this first chapter, we will describe some generic information
    valid for all applications within the SUMO package</para>

    <sect1>
      <title>Modules and Module Dependencies</title>

      <para>As some parts of the code are used within all applications and
      some other parts are used within more than a single application, we have
      divided the code into logical modules. Classes shared by almost all
      applications and do not have a certain meaning within the simulation
      context are located within the utils-folder. All other folders hold
      classes responsible for a certain part of the simulation building and
      execution process.</para>

      <para>Within the MSVC-environments you will find three types of projects
      within the workspace: a) executables, named as the executable that is
      build; b) uncommon libraries, named y_lib*, which are used by a small
      subset of applications each; c) common libraries used by most of the
      applications.</para>

      <sect2>
        <title>Modules</title>

        <table>
          <title>Module purposes</title>

          <tgroup cols="3">
            <thead>
              <row>
                <entry>Name</entry>

                <entry>Description</entry>

                <entry>Class Name Prefix</entry>
              </row>
            </thead>

            <tbody>
              <row>
                <entry><filename>gui</filename></entry>

                <entry>Classes used by the gui application for window
                handling, visualisation etc.</entry>

                <entry>GUI*</entry>
              </row>

              <row>
                <entry><filename>guinetload</filename></entry>

                <entry>Classes derived from netload-classes to load and build
                guisim-versions of the microsim classes.</entry>

                <entry>GUI*</entry>
              </row>

              <row>
                <entry><filename>guisim</filename></entry>

                <entry>Classes derived from microsim-classes to allow their
                usage within the simulation's gui-version.</entry>

                <entry>GUI*</entry>
              </row>

              <row>
                <entry><filename>icons</filename></entry>

                <entry>Application icons.</entry>

                <entry>*.ico</entry>
              </row>

              <row>
                <entry><filename>microsim</filename></entry>

                <entry>The microsimulation kernel - classes.</entry>

                <entry>MS*</entry>
              </row>

              <row>
                <entry><filename>netbuild</filename></entry>

                <entry>Classes to parse loaded (foreign or native) or
                generated network descriptions into SUMO-networks.</entry>

                <entry>NB*</entry>
              </row>

              <row>
                <entry><filename>netedit</filename></entry>

                <entry>Classes for visual network editing.</entry>

                <entry>NE* (the network editor is not yet
                supported/finished)</entry>
              </row>

              <row>
                <entry><filename>netgen</filename></entry>

                <entry>Classes for (grid-, spider, random-) network
                generation.</entry>

                <entry>NG*</entry>
              </row>

              <row>
                <entry><filename>netimport</filename></entry>

                <entry>Importers for foreign networks and native network
                descriptions.</entry>

                <entry>NI*</entry>
              </row>

              <row>
                <entry><filename>netload</filename></entry>

                <entry>Classes used to load networks and to parse additional
                files.</entry>

                <entry>NL*</entry>
              </row>

              <row>
                <entry><filename>od2trips</filename></entry>

                <entry>Classes for conversion of od-matrices to single vehicle
                trips.</entry>

                <entry>OD*</entry>
              </row>

              <row>
                <entry><filename>router</filename></entry>

                <entry>Herein, you can find some classes use by both the
                dua-router and the jtr-router.</entry>

                <entry>RO*</entry>
              </row>

              <row>
                <entry><filename>routing_dua</filename></entry>

                <entry>Additional classes for the dua-router.</entry>

                <entry>RODUA*</entry>
              </row>

              <row>
                <entry><filename>routing_jtr</filename></entry>

                <entry>Additional classes for the jtr-router.</entry>

                <entry>ROJTR*</entry>
              </row>

              <row>
                <entry><filename>sumo_only</filename></entry>

                <entry>Additional classes for sumo.</entry>

                <entry>SUMO*</entry>
              </row>

              <row>
                <entry><filename>tools</filename></entry>

                <entry>Location for addition c++ tools.</entry>

                <entry>*</entry>
              </row>

              <row>
                <entry><filename>utils</filename></entry>

                <entry>utils is not a module itself. Rather, you can find
                several modules that are used within most of the
                applications.</entry>

                <entry>*</entry>
              </row>
            </tbody>
          </tgroup>
        </table>

        <sect3 id="utils">
          <title>utils</title>

          <table>
            <title>Utils submodules</title>

            <tgroup cols="2">
              <thead>
                <row>
                  <entry>Name</entry>

                  <entry>Description</entry>
                </row>
              </thead>

              <tbody>
                <row>
                  <entry><filename>bindevice</filename></entry>

                  <entry>A binary writer and a binary reader.</entry>
                </row>

                <row>
                  <entry><filename>common</filename></entry>

                  <entry>Some classes used by all applications. The classes
                  define used exceptions, some parts of the sub-systems
                  etc.</entry>
                </row>

                <row>
                  <entry><filename>convert</filename></entry>

                  <entry>Classes converting between different data types
                  (string to int and reverse conversion etc.)</entry>
                </row>

                <row>
                  <entry><filename>dev</filename></entry>

                  <entry>the classes located herein are used by the
                  windows-version only. The class MemDiff allows to track
                  memory leaks.</entry>
                </row>

                <row>
                  <entry><filename>distribution</filename></entry>

                  <entry>Classes that describe a value's statistical
                  distribution using different methods</entry>
                </row>

                <row>
                  <entry><filename>foxtools</filename></entry>

                  <entry>Some additional FOX-classes</entry>
                </row>

                <row>
                  <entry><filename>geom</filename></entry>

                  <entry>Some helper classes for geometrical
                  operations</entry>
                </row>

                <row>
                  <entry><filename>gfx</filename></entry>

                  <entry>graphic primitives</entry>
                </row>

                <row>
                  <entry><filename>glutils</filename></entry>

                  <entry>some helper classes for visualisation using
                  openGL</entry>
                </row>

                <row>
                  <entry><filename>gui</filename></entry>

                  <entry>Classes used by the guis</entry>
                </row>

                <row>
                  <entry><filename>helpers</filename></entry>

                  <entry>Some other helper classes</entry>
                </row>

                <row>
                  <entry><filename>importio</filename></entry>

                  <entry>some classes that help to import data</entry>
                </row>

                <row>
                  <entry><filename>iodevices</filename></entry>

                  <entry>This package contains various types of output
                  devices, such as files or cout, data can be written
                  into</entry>
                </row>

                <row>
                  <entry><filename>options</filename></entry>

                  <entry>classes that read an application's options from the
                  command line and from XML-configuration files</entry>
                </row>

                <row>
                  <entry><filename>router</filename></entry>

                  <entry>Some further classes used by the router</entry>
                </row>

                <row>
                  <entry><filename>shapes</filename></entry>

                  <entry>Some shapes describing classes</entry>
                </row>

                <row>
                  <entry><filename>sumoxml</filename></entry>

                  <entry>definitions of tags used by SUMO</entry>
                </row>

                <row>
                  <entry><filename>xml</filename></entry>

                  <entry>classes that ease the work with SAX-handlers</entry>
                </row>
              </tbody>
            </tgroup>
          </table>
        </sect3>
      </sect2>

      <sect2>
        <title>Application Dependencies</title>

        <table>
          <title>Application dependencies</title>

          <tgroup cols="2">
            <thead>
              <row>
                <entry>Application</entry>

                <entry>Used Modules</entry>
              </row>
            </thead>

            <tbody>
              <row>
                <entry>DUA-Router</entry>

                <entry>Uses<itemizedlist spacing="compact">
                    <listitem>
                      <para>dua_router_main.cpp &amp; dua_router_help.h</para>
                    </listitem>

                    <listitem>
                      <para>routing_dua/*</para>
                    </listitem>

                    <listitem>
                      <para>router/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/router/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/options/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/convert/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/common/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/gfx/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/sumoxml/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/xml/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/importio/*</para>
                    </listitem>

                    <listitem>
                      <para>LIB_XERCES</para>
                    </listitem>
                  </itemizedlist></entry>
              </row>

              <row>
                <entry>GUI</entry>

                <entry>Uses<itemizedlist spacing="compact">
                    <listitem>
                      <para>sumo_main.cpp &amp; sumo_help.h</para>
                    </listitem>

                    <listitem>
                      <para>gui/*</para>
                    </listitem>

                    <listitem>
                      <para>guinetload/*</para>
                    </listitem>

                    <listitem>
                      <para>guisim/*</para>
                    </listitem>

                    <listitem>
                      <para>helpers/*</para>
                    </listitem>

                    <listitem>
                      <para>microsim/*</para>
                    </listitem>

                    <listitem>
                      <para>netload/*</para>
                    </listitem>

                    <listitem>
                      <para>sumo_only/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/fonts/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/geom/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/gfx/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/glutils/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/iodevices/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/options/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/convert/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/common/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/qutils/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/sumoxml/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/xml/*</para>
                    </listitem>

                    <listitem>
                      <para>LIB_XERCES</para>
                    </listitem>
                  </itemizedlist></entry>
              </row>

              <row>
                <entry>JTR-Router</entry>

                <entry>Uses<itemizedlist spacing="compact">
                    <listitem>
                      <para>jtr_router_main.cpp &amp; jtr_router_help.h</para>
                    </listitem>

                    <listitem>
                      <para>routing_jtr/*</para>
                    </listitem>

                    <listitem>
                      <para>router/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/router/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/options/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/convert/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/common/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/gfx/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/sumoxml/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/xml/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/importio/*</para>
                    </listitem>

                    <listitem>
                      <para>LIB_XERCES</para>
                    </listitem>
                  </itemizedlist></entry>
              </row>

              <row>
                <entry>NETCONVERT</entry>

                <entry>Uses<itemizedlist spacing="compact">
                    <listitem>
                      <para>netconvert_main.cpp &amp; netconvert_help.h</para>
                    </listitem>

                    <listitem>
                      <para>netbuild/*</para>
                    </listitem>

                    <listitem>
                      <para>netimport/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/convert/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/common/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/distribution/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/geom/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/gfx/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/importio/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/options/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/sumoxml/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/xml/*</para>
                    </listitem>

                    <listitem>
                      <para>LIB_XERCES</para>
                    </listitem>
                  </itemizedlist></entry>
              </row>

              <row>
                <entry>NETGEN</entry>

                <entry>Uses<itemizedlist spacing="compact">
                    <listitem>
                      <para>netgen_main.cpp &amp; netgen_help.h</para>
                    </listitem>

                    <listitem>
                      <para>netbuild/*</para>
                    </listitem>

                    <listitem>
                      <para>netgen/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/convert/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/common/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/geom/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/importio/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/options/*</para>
                    </listitem>

                    <listitem>
                      <para>LIB_XERCES</para>
                    </listitem>
                  </itemizedlist></entry>
              </row>

              <row>
                <entry>OD2Trips</entry>

                <entry>Uses<itemizedlist spacing="compact">
                    <listitem>
                      <para>od2trips_main.cpp &amp; od2trips_help.h</para>
                    </listitem>

                    <listitem>
                      <para>od2trips/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/options/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/convert/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/common/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/sumoxml/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/xml/*</para>
                    </listitem>

                    <listitem>
                      <para>LIB_XERCES</para>
                    </listitem>
                  </itemizedlist></entry>
              </row>

              <row>
                <entry>SUMO</entry>

                <entry>Uses<itemizedlist spacing="compact">
                    <listitem>
                      <para>sumo_main.cpp &amp; sumo_help.h</para>
                    </listitem>

                    <listitem>
                      <para>helpers/*</para>
                    </listitem>

                    <listitem>
                      <para>microsim/*</para>
                    </listitem>

                    <listitem>
                      <para>netload/*</para>
                    </listitem>

                    <listitem>
                      <para>sumo_only/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/gfx/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/iodevices/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/options/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/convert/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/common/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/sumoxml/*</para>
                    </listitem>

                    <listitem>
                      <para>utils/xml/*</para>
                    </listitem>

                    <listitem>
                      <para>LIB_XERCES</para>
                    </listitem>
                  </itemizedlist></entry>
              </row>
            </tbody>
          </tgroup>
        </table>
      </sect2>
    </sect1>
  </chapter>
</book>
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">

    <xsd:include schemaLocation="routeTypes.xsd" />

    <xsd:element name="additional" type="additionalType"></xsd:element>
    
    <xsd:complexType name="additionalType">
        <xsd:choice maxOccurs="unbounded">
            <xsd:element name="vTypeProbe" type="vTypeProbeType" minOccurs="0"></xsd:element>
            <xsd:element name="e1Detector" type="e1DetectorType" minOccurs="0"></xsd:element>
            <xsd:element name="e2Detector" type="e2DetectorType" minOccurs="0"></xsd:element>
            <xsd:element name="e3Detector" type="e3DetectorType" minOccurs="0"></xsd:element>
            <xsd:element name="edgeData" type="meandataType" minOccurs="0"></xsd:element>
            <xsd:element name="laneData" type="meandataType" minOccurs="0"></xsd:element>
            <xsd:element name="timed_event" type="timed_eventType" minOccurs="0"></xsd:element>
            <xsd:element name="tlLogic" type="tlLogicType" minOccurs="0"></xsd:element>
            <xsd:element name="WAUT" type="WAUTType" minOccurs="0"></xsd:element>
            <xsd:element name="wautJunction" type="wautJunctionType" minOccurs="0"></xsd:element>
            <xsd:element name="variableSpeedSign" type="variableSpeedSignType" minOccurs="0"></xsd:element>
            <xsd:element name="routeProbe" type="routeProbeType" minOccurs="0"></xsd:element>
            <xsd:element name="instantInductionLoop" type="instantInductionLoopType" minOccurs="0"></xsd:element>

            <xsd:element name="vTypeDistribution" type="vTypeDistributionType" minOccurs="0"></xsd:element>
            <xsd:element name="routeDistribution" type="routeDistributionType" minOccurs="0"></xsd:element>
            <xsd:element name="vType" type="vTypeType" minOccurs="0"></xsd:element>
            <xsd:element name="route" type="routeType" minOccurs="0"></xsd:element>
            <xsd:element name="vehicle" type="vehicleType" minOccurs="0"></xsd:element>
            <xsd:element name="flow" type="flowType" minOccurs="0"></xsd:element>
            <xsd:element name="person" type="personType" minOccurs="0"></xsd:element>
            <xsd:element name="include" minOccurs="0">
                <xsd:complexType>
                    <xsd:attribute name="href" type="xsd:string"></xsd:attribute>
                </xsd:complexType>
            </xsd:element>
        </xsd:choice>

    </xsd:complexType>
    
    <xsd:complexType name="e1DetectorType">
        <xsd:attribute name="id" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="lane" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="pos" type="xsd:float" use="required"></xsd:attribute>
        <xsd:attribute name="freq" type="xsd:int" use="required"></xsd:attribute>
        <xsd:attribute name="file" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="friendlyPos" use="optional" type="xsd:boolean">
        </xsd:attribute>
    </xsd:complexType>

    <xsd:complexType name="vTypeProbeType">
        <xsd:attribute name="id" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="type" type="xsd:string" use="optional"></xsd:attribute>
        <xsd:attribute name="freq" type="xsd:int" use="required"></xsd:attribute>
        <xsd:attribute name="file" type="xsd:string" use="required"></xsd:attribute>
    </xsd:complexType>

    <xsd:complexType name="e2DetectorType">
        <xsd:attribute name="id" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="lane" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="pos" type="xsd:float" use="required"></xsd:attribute>
        <xsd:attribute name="file" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="length" type="xsd:float" use="required"></xsd:attribute>
        <xsd:attribute name="freq" type="xsd:int" use="optional"></xsd:attribute>
        <xsd:attribute name="tl" type="xsd:string" use="optional"></xsd:attribute>
        <xsd:attribute name="cont" type="xsd:boolean" use="optional"></xsd:attribute>
        <xsd:attribute name="time_treshold" type="xsd:int" use="optional"></xsd:attribute>
        <xsd:attribute name="speed_treshold" type="xsd:float" use="optional"></xsd:attribute>
        <xsd:attribute name="jam_treshold" type="xsd:float" use="optional"></xsd:attribute>
        <xsd:attribute name="friendlyPos" use="optional" type="xsd:boolean"></xsd:attribute>
    </xsd:complexType>

    <xsd:complexType name="e3DetectorType">
        <xsd:sequence>
            <xsd:element name="detEntry" type="detEntryExitType"
                minOccurs="1" maxOccurs="unbounded">
            </xsd:element>
            <xsd:element name="detExit" type="detEntryExitType"
                minOccurs="1" maxOccurs="unbounded">
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="freq" type="xsd:int" use="required"></xsd:attribute>
        <xsd:attribute name="file" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="time_treshold" type="xsd:float" use="optional"></xsd:attribute>
        <xsd:attribute name="speed_treshold" type="nonNegativeFloatType" use="optional"></xsd:attribute>
    </xsd:complexType>

    <xsd:complexType name="detEntryExitType">
        <xsd:attribute name="lane" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="pos" type="xsd:float" use="required"></xsd:attribute>
        <xsd:attribute name="friendlyPos" use="optional" type="xsd:boolean">
        </xsd:attribute>
    </xsd:complexType>

    <xsd:complexType name="meandataType">
        <xsd:attribute name="id" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="type" use="optional">
            <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:enumeration value="hbefa"></xsd:enumeration>
                    <xsd:enumeration value="harmonoise"></xsd:enumeration>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:attribute>
        <xsd:attribute name="freq" type="xsd:int" use="required"></xsd:attribute>
        <xsd:attribute name="file" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="begin" type="xsd:int" use="optional"></xsd:attribute>
        <xsd:attribute name="end" type="xsd:int" use="optional"></xsd:attribute>
        <xsd:attribute name="excludeEmpty" type="xsd:boolean" use="optional"></xsd:attribute>
    </xsd:complexType>

    <xsd:complexType name="timed_eventType">
        <xsd:attribute name="type" use="required">
            <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:enumeration value="SaveTLSStates"></xsd:enumeration>
                    <xsd:enumeration value="SaveTLSSwitches"></xsd:enumeration>
                    <xsd:enumeration value="SaveTLSSwitchStates"></xsd:enumeration>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:attribute>
        <xsd:attribute name="source" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="dest" type="xsd:string" use="required"></xsd:attribute>
    </xsd:complexType>

    <xsd:complexType name="tlLogicType">
        <xsd:sequence>
            <xsd:element name="phase" type="phaseType" minOccurs="1" maxOccurs="unbounded"></xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="type" use="required">
            <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:enumeration value="actuated"></xsd:enumeration>
                    <xsd:enumeration value="agentbased"></xsd:enumeration>
                    <xsd:enumeration value="static"></xsd:enumeration>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:attribute>
        <xsd:attribute name="programID" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="offset" type="xsd:float" use="required"></xsd:attribute>
    </xsd:complexType>

    <xsd:complexType name="phaseType">
        <xsd:attribute name="duration" type="positiveFloatType" use="required"></xsd:attribute>
        <xsd:attribute name="state" use="required">
            <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:pattern value="(G|g|r|y)+"></xsd:pattern>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:attribute>
    </xsd:complexType>

    <xsd:complexType name="WAUTType">
        <xsd:sequence>
            <xsd:element name="wautSwitch" type="wautSwitchType" minOccurs="0" maxOccurs="unbounded"></xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="refTime" type="xsd:int" use="required"></xsd:attribute>
        <xsd:attribute name="startProg" type="xsd:string" use="required"></xsd:attribute>
    </xsd:complexType>

    <xsd:complexType name="wautSwitchType">
        <xsd:attribute name="time" type="xsd:int" use="required"></xsd:attribute>
        <xsd:attribute name="to" type="xsd:string" use="required"></xsd:attribute>
    </xsd:complexType>

    <xsd:complexType name="wautJunctionType">
        <xsd:attribute name="wautID" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="junctionID" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="procedure" type="xsd:string"></xsd:attribute>
        <xsd:attribute name="synchron" type="xsd:string"></xsd:attribute>
    </xsd:complexType>

    <xsd:complexType name="variableSpeedSignType">
        <xsd:attribute name="id" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="lanes" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="file" type="xsd:string" use="required"></xsd:attribute>
    </xsd:complexType>

    <xsd:complexType name="instantInductionLoopType">
        <xsd:attribute name="id" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="lane" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="pos" type="xsd:float" use="required"></xsd:attribute>
        <xsd:attribute name="file" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="friendlyPos" use="optional" type="xsd:boolean">
        </xsd:attribute>
    </xsd:complexType>

    <xsd:complexType name="routeProbeType">
        <xsd:attribute name="id" type="xsd:string" use="required"></xsd:attribute>
        <xsd:attribute name="edge" type="xsd:string" use="optional"></xsd:attribute>
        <xsd:attribute name="freq" type="xsd:int" use="required"></xsd:attribute>
        <xsd:attribute name="file" type="xsd:string" use="required"></xsd:attribute>
    </xsd:complexType>

</xsd:schema>

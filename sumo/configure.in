dnl Process this file with autoconf to produce a configure script.
AC_INIT(sumo/main.cpp)
AC_CANONICAL_SYSTEM

dnl create an config-header
AM_CONFIG_HEADER(config.h)

dnl enabel automake-support
AM_INIT_AUTOMAKE(sumo,0.7)

AC_PREFIX_DEFAULT(/usr/local)
if test "x$prefix" = "xNONE"; then
  prefix=$ac_default_prefix
  ac_configure_args="$ac_configure_args --prefix $prefix"
fi

dnl Checks for programs.
AC_PROG_CXX
AC_PROG_INSTALL

dnl don't create shared libtool-libraries
dnl AC_DISABLE_SHARED

dnl create static libtool-libraries instead
dnl AC_ENABLE_STATIC(yes)

dnl enable libtool-support
AM_PROG_LIBTOOL


dnl Check for enable-features that shall go into config.h
AC_ARG_ENABLE(debug,
              [  --enable-debug          enable sumo debugging code [default=no].],
              [AC_DEFINE(_DEBUG, 1,
                         [Define to 1 in order to enable sumo debugging code.])
	      ])

AC_ARG_ENABLE(assert,
              [  --disable-assert        disable assertions [default=no].],
              [AC_DEFINE(NDEBUG, 1,
                         [Define to 1 in order to disable assertions.])
	      ])

AC_ARG_ENABLE(inline,
              [  --disable-inline        disable inlining [default=no].],
              [AC_DEFINE(DISABLE_INLINE, 1,
                         [Define to 1 in order to disable inlining.])
	      ])

AC_ARG_ENABLE(speedcheck,
              [  --enable-speedcheck     enable sumo speedchecking code [default=no].],
              [AC_DEFINE(_SPEEDCHECK, 1,
                         [Define to 1 in order to enable simulation-speed checking.])
	      ])


dnl Checks for libraries.
dnl Checks for xerces-library
AC_ARG_WITH(xerces-libraries,
    [  --with-xerces-libraries=DIR where the Xerces library is installed.],
    [  ac_xerces_libraries="$withval"
    ])

AC_MSG_CHECKING([for xerces-lib])
if test x"$ac_xerces_libraries" = x; then
   if test -e /usr/lib/libxerces.so; then
      AC_MSG_RESULT([yes])
      ac_xerces_lib_path=/usr/lib
      ac_xerceslib=xerces
   elif test -e /usr/lib/libxerces-c.so; then
      AC_MSG_RESULT([yes])
      ac_xerces_lib_path=/usr/lib
      ac_xerceslib=xerces-c
   elif test -e /usr/local/lib/libxerces.so; then
      AC_MSG_RESULT([yes])
      ac_xerces_lib_path=/usr/local/lib
      ac_xerceslib=xerces
   elif test -e /usr/local/lib/libxerces-c.so; then
      AC_MSG_RESULT([yes])
      ac_xerces_lib_path=/usr/local/lib
      ac_xerceslib=xerces-c
   elif test -e /usr/local/xerces/lib/libxerces.so; then
      AC_MSG_RESULT([yes])
      ac_xerces_lib_path=/usr/local/xerces/lib/
      ac_xerceslib=xerces
   elif test -e /usr/local/xerces/lib/libxerces-c.so; then
      AC_MSG_RESULT([yes])
      ac_xerces_lib_path=/usr/local/xerces/lib/
      ac_xerceslib=xerces-c
   else
      AC_MSG_RESULT([no])
      AC_MSG_ERROR([xerces-lib not found. Specify path with option --with-xerces-libraries=DIR.])
   fi
else
   if test -e "$ac_xerces_lib_path/libxerces.so"; then
      AC_MSG_RESULT([yes])
      ac_xerceslib=xerces
   elif test -e "$ac_xerces_lib_path/libxerces-c.so"; then
      AC_MSG_RESULT([yes])
      ac_xerceslib=xerces-c
   else
      AC_MSG_RESULT([no])
      AC_MSG_ERROR([xerces-lib not found in "$ac_xerces_lib_path".])
   fi
fi
XERCESLIBPATH="$ac_xerces_lib_path"
AC_SUBST(XERCESLIBPATH)
XERCESLIB="$ac_xerceslib"
AC_SUBST(XERCESLIB)


dnl Checks for header files.
dnl Checks for Xerces-includes.
AC_ARG_WITH(xerces-includes,
    [  --with-xerces-includes=DIR  where the Xerces includes are. ],
    [
       ac_xerces_includes="$withval"
    ])

AC_MSG_CHECKING([for xerces-includes])
if test x"$ac_xerces_includes" = x; then
   if test -e /usr/include/xerces; then
      AC_MSG_RESULT([yes])
      ac_xerces_includes=/usr/include/xerces
   elif test -e /usr/include/xercesc; then
      AC_MSG_RESULT([yes])
      ac_xerces_includes=/usr/include/xercesc
   elif test -e /usr/local/include/xerces; then
      AC_MSG_RESULT([yes])
      ac_xerces_includes=/usr/local/include/xerces
   elif test -e /usr/local/include/xercesc; then
      AC_MSG_RESULT([yes])
      ac_xerces_includes=/usr/local/include/xercesc
   elif test -e /usr/local/xerces/include; then
      AC_MSG_RESULT([yes])
      ac_xerces_includes=/usr/local/xerces/include
   elif test -e /usr/local/xercesc/include; then
      AC_MSG_RESULT([yes])
      ac_xerces_includes=/usr/local/xercesc/include
   else
      AC_MSG_RESULT([no])
      AC_MSG_ERROR([xerces-includes not found. Specify path with option --with-xerces-includes=DIR.])
   fi
else
   if test -e "$ac_xerces_includes"; then
      AC_MSG_RESULT([yes])
   else
      AC_MSG_RESULT([no])
      AC_MSG_ERROR([xerces-includes not found in "$ac_xerces_includes".])
   fi
fi
XERCESINCLUDE="$ac_xerces_includes"
AC_SUBST(XERCESINCLUDE)


dnl Checks for typedefs, structures, and compiler characteristics.




dnl perform program name transformation
AC_ARG_PROGRAM

dnl add here all your Makefiles. These will be created by configure
AC_OUTPUT(
sumo/data/config/Makefile
sumo/data/detectors/Makefile
sumo/data/junctions/Makefile
sumo/data/nets/Makefile
sumo/data/routes/Makefile
sumo/data/routedefs/Makefile
sumo/data/Makefile
sumo/helpers/Makefile
sumo/microsim/Makefile
sumo/netload/Makefile
sumo/utils/Makefile
sumo/Makefile
Makefile)



